import{i as x,Z as N,r as v,c as o,o as n,a as c,b as t,f as r,t as s,l as u,F as f,j as g,w as b,e as h}from"./app-CXoDEO4O.js";import{L as C}from"./Layout-xs1QXmZU.js";import{I as T}from"./moment-Zz55rVuQ.js";import{_ as j}from"./FlashMessages-DJZZJzeJ.js";const L={metaInfo:{title:"Dashboard"},components:{Head:N,Icon:T,Link:x},layout:C,props:{auth:Object,entries:Array,chart_line:Object,api_key:String,new_tickets:Number,total_tickets:Number,un_assigned_tickets:Number,opened_tickets:Number,closed_tickets:Number,first_response:Array,top_creators:Array,last_response:Array,top_departments:Array,top_types:Array,total_customer:Number,total_contacts:Number,customer_tickets:Array,notifications:Array},data(){return{errors:[],loading:!1,firstResponse:[],lastResponse:[],months:[]}},created(){for(let e=0;e<this.first_response.length;e++)e%2===0&&(this.firstResponse=[...this.firstResponse,[this.first_response[e],this.first_response[e+1]]]);for(let e=0;e<this.last_response.length;e++)e%2===0&&(this.lastResponse=[...this.lastResponse,[this.last_response[e],this.last_response[e+1]]]);this.months=this.chart_line.previousMonths.map(e=>({month:e,value:this.chart_line.months[e]?this.chart_line.months[e]*100/this.chart_line.total+"%":"0%"}))},methods:{goToLink(e){window.location.href=e}}},R={class:"badge__items flex flex-col lg:flex-row gap-5"},A={class:"l__items bg-white rounded-lg shadow-lg flex justify-between w-full"},I={class:"badge__info"},z={class:"title"},V={class:"number"},B={class:"a__right"},S={class:"round_circle pr-3 rtl:pl-3"},D={class:"l__items bg-white rounded-lg shadow-lg flex justify-between w-full"},F={class:"badge__info"},H={class:"title"},M={class:"number"},O={class:"a__right"},E={class:"round_circle pr-3 rtl:pl-3"},U={class:"l__items bg-white rounded-lg shadow-lg flex justify-between w-full"},Y={class:"badge__info"},Z={class:"title"},q={class:"number"},G={class:"a__right"},J={class:"round_circle pr-3 rtl:pl-3"},K={class:"l__items bg-white rounded-lg shadow-lg flex justify-between w-full"},P={class:"badge__info"},Q={class:"title"},W={class:"number"},X={class:"a__right"},$={class:"round_circle pr-3 rtl:pl-3"},tt={key:0,class:"flex flex-wrap mt-8"},et={class:"w-full lg:w-1/2 pr-3"},st={key:0,class:"bg-white rounded-md shadow overflow-x-auto"},it={class:"w-full whitespace-nowrap"},lt={class:"text-left font-bold"},ot={class:"pb-4 pt-6 px-6"},nt={class:"pb-4 pt-6 px-6"},at={class:"pb-4 pt-6 px-6"},ct={class:"border-t"},rt={class:"border-t"},dt={class:"border-t"},_t={key:0},ht={class:"px-6 py-4 border-t",colspan:"3"},ut={key:1,class:"mt-4 text-center"},ft={class:"w-full lg:w-1/2 pl-3"},gt={key:0,class:"bg-white rounded-md shadow overflow-hidden"},pt={class:"p-4 border-b"},mt={class:"font-bold text-lg"},vt={class:"divide-y"},bt=["onClick"],wt={class:"text-gray-600"},kt={key:1,class:"response__details mt-8 flex gap-5 flex-col lg:flex-row"},yt={class:"w-full"},xt={class:"r__wrapper flex flex-col pl-5 pr-5 pb-5 bg-white items-center rounded-lg shadow-lg rd"},Nt={class:"th__ttl font-bold text-lg pt-3"},Ct={class:"th__info flex flex-col pt-3"},Tt={class:"w-full"},jt={class:"r__wrapper flex flex-col pl-5 pr-5 pb-5 bg-white items-center rounded-lg shadow-lg rd"},Lt={class:"th__ttl font-bold text-lg pt-3"},Rt={class:"th__info flex flex-col pt-3"},At={class:"w-full"},It={class:"r__wrapper flex flex-col pl-5 pl-5 pb-5 bg-white items-center rounded-lg shadow-lg rd"},zt={class:"th__ttl font-bold text-lg pt-3"},Vt={class:"th__info flex flex-col pt-3"},Bt={key:2,class:"response__details flex flex-col lg:flex-row mt-8 gap-5"},St={class:"flex gap-5 flex-col lg:flex-row lg:w-10/12"},Dt={class:"w-full"},Ft={class:"r__wrapper flex flex-col p-5 bg-white rounded-lg shadow-lg rd"},Ht={class:"th__ttl font-bold text-lg pt-3"},Mt={class:"th__info flex"},Ot={class:"text-2xl font-bold"},Et={class:"pt-2 text-xs pl-1 pr-1"},Ut={class:"pt-2 text-xs font-bold pl-2 pr-2"},Yt={key:0,class:"flex w-full justify-center c__wrapper"},Zt={class:"c__line flex flex-col w-full items-center gap-3"},qt={class:"cl__n text-xs"},Gt={class:"rd w-full lg:w-2/5"},Jt={class:"r__wrapper flex flex-col pl-5 pr-5 pb-5 bg-white rounded-lg shadow-lg rd"},Kt={class:"res__info"},Pt={class:"title"},Qt={class:"res_avg"},Wt={class:"flex justify-start"},Xt={class:"num"},$t={class:"text"},te={key:1,class:"res_time pr-5"},ee={class:"tc__info"},se={class:"title"},ie={class:"res_avg"},le={class:"flex justify-start"},oe={class:"num"},ne={class:"text"},ae={key:1,class:"res_time pr-5"},ce={class:"flex gap-5 flex-col lg:w-2/12"},re={class:"l__items bg-white rounded-lg shadow-lg flex justify-between w-full"},de={class:"badge__info"},_e={class:"title"},he={class:"number"},ue={class:"a__right"},fe={class:"l__items bg-white rounded-lg shadow-lg flex justify-between w-full"},ge={class:"badge__info"},pe={class:"title"},me={class:"number"},ve={class:"a__right"},be={key:3,class:"processing-overlay"},we={class:"loader"},ke={width:"200px",height:"200px",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",style:{background:"none"}};function ye(e,a,i,xe,d,_){const y=v("Head"),p=v("Link"),w=v("vc-donut"),k=v("icon");return n(),o("div",null,[c(y,{title:e.$t("Dashboard")},null,8,["title"]),t("div",R,[t("div",{class:"badge__item h-32 w-full lg:w-1/4 cursor-pointer",onClick:a[0]||(a[0]=l=>_.goToLink(this.route("tickets",{type:"new"})))},[t("div",A,[t("div",I,[t("span",z,s(e.$t("New Tickets")),1),t("span",V,s(i.new_tickets),1)]),t("div",B,[t("div",S,[t("div",{class:"pie animate",style:u({"--pie_val":parseInt(i.new_tickets*100/i.total_tickets)})},s(parseInt(i.new_tickets*100/i.total_tickets)||0)+"%",5)])])])]),t("div",{class:"badge__item h-32 w-full lg:w-1/4 cursor-pointer",onClick:a[1]||(a[1]=l=>_.goToLink(this.route("tickets",{type:"open"})))},[t("div",D,[t("div",F,[t("span",H,s(e.$t("Open Tickets")),1),t("span",M,s(i.opened_tickets),1)]),t("div",O,[t("div",E,[t("div",{class:"pie animate",style:u({"--pie_val":parseInt(i.opened_tickets*100/i.total_tickets)})},s(parseInt(i.opened_tickets*100/i.total_tickets)||0)+"%",5)])])])]),t("div",{class:"badge__item h-32 w-full lg:w-1/4 cursor-pointer",onClick:a[2]||(a[2]=l=>_.goToLink(this.route("tickets",{search:"close"})))},[t("div",U,[t("div",Y,[t("span",Z,s(e.$t("Closed Tickets")),1),t("span",q,s(i.closed_tickets),1)]),t("div",G,[t("div",J,[t("div",{class:"pie animate",style:u({"--pie_val":parseInt(i.closed_tickets*100/i.total_tickets)})},s(parseInt(i.closed_tickets*100/i.total_tickets)||0)+"%",5)])])])]),i.auth.user.role.slug!=="customer"?(n(),o("div",{key:0,class:"badge__item h-32 w-full lg:w-1/4 cursor-pointer",onClick:a[3]||(a[3]=l=>_.goToLink(this.route("tickets",{type:"un_assigned"})))},[t("div",K,[t("div",P,[t("span",Q,s(e.$t("Unassigned Tickets")),1),t("span",W,s(i.un_assigned_tickets),1)]),t("div",X,[t("div",$,[t("div",{class:"pie animate",style:u({"--pie_val":parseInt(i.un_assigned_tickets*100/i.total_tickets)})},s(parseInt(i.un_assigned_tickets*100/i.total_tickets)||0)+"%",5)])])])])):r("",!0)]),i.auth.user.role.slug==="customer"?(n(),o("div",tt,[t("div",et,[i.customer_tickets.length?(n(),o("div",st,[t("table",it,[t("tr",lt,[t("th",ot,s(e.$t("Ticket Number")),1),t("th",nt,s(e.$t("Name")),1),t("th",at,s(e.$t("Status")),1)]),(n(!0),o(f,null,g(i.customer_tickets,l=>(n(),o("tr",{key:l.uid,class:"hover:bg-gray-100 focus-within:bg-gray-100"},[t("td",ct,[c(p,{class:"flex items-center px-6 py-4 focus:text-indigo-500",href:e.route("tickets.edit",l.uid)},{default:b(()=>[h(s(l.uid),1)]),_:2},1032,["href"])]),t("td",rt,[c(p,{class:"flex items-center px-6 py-4",href:e.route("tickets.edit",l.uid),tabindex:"-1"},{default:b(()=>[h(s(l.subject),1)]),_:2},1032,["href"])]),t("td",dt,[c(p,{class:"flex items-center px-6 py-4",href:e.route("tickets.edit",l.uid),tabindex:"-1"},{default:b(()=>[h(s(l.status),1)]),_:2},1032,["href"])])]))),128)),i.customer_tickets.length===0?(n(),o("tr",_t,[t("td",ht,s(e.$t("No tickets found.")),1)])):r("",!0)])])):r("",!0),i.customer_tickets.length?(n(),o("div",ut,[c(p,{class:"text-indigo-600 hover:text-indigo-900",href:e.route("tickets")},{default:b(()=>[h(s(e.$t("View All")),1)]),_:1},8,["href"])])):r("",!0)]),t("div",ft,[i.notifications.length?(n(),o("div",gt,[t("div",pt,[t("h2",mt,s(e.$t("Notifications")),1)]),t("ul",vt,[(n(!0),o(f,null,g(i.notifications,l=>(n(),o("li",{key:l.id,class:"p-4 hover:bg-gray-100 cursor-pointer",onClick:m=>_.goToLink(l.data.url)},[t("p",wt,s(l.data.message),1)],8,bt))),128))])])):r("",!0)])])):r("",!0),i.auth.user.role.slug!=="customer"?(n(),o("div",kt,[t("div",yt,[t("div",xt,[t("h2",Nt,s(e.$t("Ticket by department")),1),t("div",Ct,[c(w,{background:"white",foreground:"grey",size:120,unit:"px",thickness:45,"has-legend":"","legend-placement":"right",sections:i.top_departments,total:100,"start-angle":0,"auto-adjust-text-size":!0},null,8,["sections"])])])]),t("div",Tt,[t("div",jt,[t("h2",Lt,s(e.$t("Ticket by type")),1),t("div",Rt,[c(w,{background:"white",foreground:"grey",size:120,unit:"px",thickness:45,"has-legend":"","legend-placement":"right",sections:i.top_types,total:100,"start-angle":0,"auto-adjust-text-size":!0},null,8,["sections"])])])]),t("div",At,[t("div",It,[t("h2",zt,s(e.$t("Top ticket creator")),1),t("div",Vt,[c(w,{background:"white",foreground:"grey",size:120,unit:"px",thickness:45,"has-legend":"","legend-placement":"right",sections:i.top_creators,total:100,"start-angle":0,"auto-adjust-text-size":!0},null,8,["sections"])])])])])):r("",!0),i.auth.user.role.slug!=="customer"?(n(),o("div",Bt,[t("div",St,[t("div",Dt,[t("div",Ft,[t("h2",Ht,s(e.$t("Ticket history")),1),t("div",Mt,[t("span",Ot,s(i.chart_line.this_month),1),t("span",Et,"/ "+s(e.$t("this month")),1),t("span",Ut,s(e.$t("last month"))+" "+s(i.chart_line.last_month),1)]),d.months.length?(n(),o("div",Yt,[(n(!0),o(f,null,g(d.months,l=>(n(),o("div",Zt,[t("span",{class:"cl__b",style:u({"--cl_value":l.value})},null,4),t("span",qt,s(l.month),1)]))),256))])):r("",!0)])]),t("div",Gt,[t("div",Jt,[t("div",Kt,[t("span",Pt,s(e.$t("First Response Time")),1),t("span",Qt,s(e.$t("Average")),1),t("div",Wt,[d.firstResponse.length?(n(!0),o(f,{key:0},g(d.firstResponse,(l,m)=>(n(),o("div",{class:"res_time pr-5",key:m},[t("span",Xt,s(l[0]),1),t("span",$t,s(e.$t(l[1])),1)]))),128)):(n(),o("div",te," 0 "))])]),t("div",ee,[t("span",se,s(e.$t("Last Response Time")),1),t("span",ie,s(e.$t("Average")),1),t("div",le,[d.lastResponse.length?(n(!0),o(f,{key:0},g(d.lastResponse,(l,m)=>(n(),o("div",{class:"res_time pr-5",key:m},[t("span",oe,s(l[0]),1),t("span",ne,s(e.$t(l[1])),1)]))),128)):(n(),o("div",ae," 0 "))])])])])]),t("div",ce,[t("div",{class:"badge__item h-32 w-full cursor-pointer",onClick:a[4]||(a[4]=l=>_.goToLink(this.route("users")))},[t("div",re,[t("div",de,[t("span",_e,s(e.$t("Customers")),1),t("span",he,s(i.total_customer),1)]),t("div",ue,[c(k,{name:"pending_users",class:"h-5 fill-gray-400 mr-5 ml-5"})])])]),t("div",{class:"badge__item h-32 w-full cursor-pointer",onClick:a[5]||(a[5]=l=>_.goToLink(this.route("contacts")))},[t("div",fe,[t("div",ge,[t("span",pe,s(e.$t("Contacts")),1),t("span",me,s(i.total_contacts),1)]),t("div",ve,[c(k,{name:"contact",class:"h-5 fill-gray-400 mr-5 ml-5"})])])])])])):r("",!0),d.loading?(n(),o("div",be,[a[9]||(a[9]=t("div",{class:"background"},null,-1)),t("div",we,[a[7]||(a[7]=h(" `")),(n(),o("svg",ke,a[6]||(a[6]=[t("circle",{cx:"75",cy:"50",fill:"#ffffff",r:"6.39718"},[t("animate",{attributeName:"r",values:"4.8;4.8;8;4.8;4.8",times:"0;0.1;0.2;0.3;1",dur:"1s",repeatCount:"indefinite",begin:"-0.875s"})],-1),t("circle",{cx:"67.678",cy:"67.678",fill:"#ffffff",r:"4.8"},[t("animate",{attributeName:"r",values:"4.8;4.8;8;4.8;4.8",times:"0;0.1;0.2;0.3;1",dur:"1s",repeatCount:"indefinite",begin:"-0.75s"})],-1),t("circle",{cx:"50",cy:"75",fill:"#ffffff",r:"4.8"},[t("animate",{attributeName:"r",values:"4.8;4.8;8;4.8;4.8",times:"0;0.1;0.2;0.3;1",dur:"1s",repeatCount:"indefinite",begin:"-0.625s"})],-1),t("circle",{cx:"32.322",cy:"67.678",fill:"#ffffff",r:"4.8"},[t("animate",{attributeName:"r",values:"4.8;4.8;8;4.8;4.8",times:"0;0.1;0.2;0.3;1",dur:"1s",repeatCount:"indefinite",begin:"-0.5s"})],-1),t("circle",{cx:"25",cy:"50",fill:"#ffffff",r:"4.8"},[t("animate",{attributeName:"r",values:"4.8;4.8;8;4.8;4.8",times:"0;0.1;0.2;0.3;1",dur:"1s",repeatCount:"indefinite",begin:"-0.375s"})],-1),t("circle",{cx:"32.322",cy:"32.322",fill:"#ffffff",r:"4.80282"},[t("animate",{attributeName:"r",values:"4.8;4.8;8;4.8;4.8",times:"0;0.1;0.2;0.3;1",dur:"1s",repeatCount:"indefinite",begin:"-0.25s"})],-1),t("circle",{cx:"50",cy:"25",fill:"#ffffff",r:"6.40282"},[t("animate",{attributeName:"r",values:"4.8;4.8;8;4.8;4.8",times:"0;0.1;0.2;0.3;1",dur:"1s",repeatCount:"indefinite",begin:"-0.125s"})],-1),t("circle",{cx:"67.678",cy:"32.322",fill:"#ffffff",r:"7.99718"},[t("animate",{attributeName:"r",values:"4.8;4.8;8;4.8;4.8",times:"0;0.1;0.2;0.3;1",dur:"1s",repeatCount:"indefinite",begin:"0s"})],-1)]))),a[8]||(a[8]=h("` "))])])):r("",!0)])}const Le=j(L,[["render",ye]]);export{Le as default};
