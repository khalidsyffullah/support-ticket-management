import{i as S,Z as U,r as f,c as i,o as s,a as d,z as B,b as o,d as j,h as x,f as u,w as b,t as a,F as c,j as g,g as v,e as h,a0 as I,y as L,v as M}from"./app-BEAYHNtc.js";import{_ as z,L as F}from"./FlashMessages-DEX8PRzT.js";import{L as T}from"./Layout-BZQQJF3i.js";import{I as q}from"./moment-DS4z8VdE.js";import{T as A}from"./TextInput-MjWXmbAW.js";import{S as D}from"./SelectInput-DuNFPQE3.js";import{L as E}from"./LoadingButton-DHz1w5lQ.js";import{Q as H}from"./vue-quill.snow-Dl0qpTl2.js";import"./v4-SoommWqA.js";const N={metaInfo:{title:"Home"},layout:T,components:{Logo:F,Icon:q,LoadingButton:E,SelectInput:D,TextInput:A,Head:U,Link:S,QuillEditor:H},props:{all_categories:Array,departments:Array,types:Array,title:String,hide_ticket_fields:Array,auth:Object,custom_fields:Object},remember:"form",data(){return{accept_terms:!1,categories:[],sub_categories:[],form:this.$inertia.form({first_name:"",last_name:"",email:"",department_id:null,category_id:null,sub_category_id:null,type_id:null,subject:null,details:"",files:[],custom_field:{}})}},methods:{getCategories(){this.categories=this.all_categories.filter(l=>l.department_id===this.form.department_id),this.form.category_id=null,this.$refs.category.selected=null},getSubCategories(){this.sub_categories=this.all_categories.filter(l=>l.parent_id===this.form.category_id),this.form.sub_category_id=null,this.$refs.sub_category.selected=null},uploadFiles(){this.form.files=this.$refs.files.files},store(){this.accept_terms||alert("You must need to accept the terms and condition."),this.form.post(this.route("ticket_store"),{onSuccess:()=>{this.form.reset()}})},fileInputChange(l){let t=l.target.files;for(let m=0;m<t.length;m++)this.form.files.push(t[m])},fileRemove(l,t){this.form.files.splice(t,1)},getFileSize(l){const t=Math.floor(Math.log(l)/Math.log(1024));return(l/Math.pow(1024,t)).toFixed(2)*1+" "+["B","kB","MB","GB","TB"][t]},fileBrowse(){this.$refs.file.click()}},created(){this.auth.user&&(this.form.first_name=this.auth.user.first_name,this.form.last_name=this.auth.user.last_name,this.form.email=this.auth.user.email);for(let l=0;l<this.custom_fields.length;l++)this.custom_fields[l.name]&&(this.form.custom_field[this.custom_fields[l.name]]="")}},O={class:"pt-20 pb-10 lg:pt-[120px] lg:pb-20 bg-gray-50"},Q={class:"container"},R={class:"px-5 pt-8"},G={class:"flex flex-wrap"},Y={value:null},Z=["value"],J={value:null},K=["value"],P={value:null},W=["value"],X={value:null},$=["value"],ee={class:"pt-2 pb-8 w-full"},te={class:"form-label"},re={class:"grid gap-6 mb-6"},le={class:"flex flex-col w-full"},oe=["for"],se={key:0,class:"pl-2 text-xs"},ae=["onUpdate:modelValue","type","id","placeholder","required"],ie=["id","onUpdate:modelValue","placeholder"],ne={key:2,class:"mt-1 text-sm text-gray-500 dark:text-gray-300"},de={class:"pr-6 pb-8 w-full lg:w-full flex-col"},me={class:"flex-1 pr-1"},ue={class:"text-gray-500 text-xs"},pe=["onClick"],fe={class:"flex items-start mb-5"},ce={class:"flex items-center h-5"},ge={for:"terms",class:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},be=["href"],he={class:"px-4 py-4 border-t border-gray-100 flex justify-end"};function _e(l,t,m,ye,r,n){const w=f("Head"),_=f("text-input"),y=f("select-input"),k=f("QuillEditor"),V=f("icon"),C=f("loading-button");return s(),i("div",null,[d(w,{title:"Home"}),t[16]||(t[16]=B('<section class="relative z-10 overflow-hidden bg-primary pt-[120px] pb-[100px] md:pt-[130px] lg:pt-[160px]"><div class="container"><div class="-mx-4 flex flex-wrap items-center"><div class="w-full px-4"><div class="text-center"><h1 class="text-4xl font-semibold text-white">Open a ticket</h1></div></div></div></div><div><span class="absolute top-0 left-0 z-[-1]"><img src="/landing/images/header/shape-1.svg" alt=""></span><span class="absolute top-0 right-0 z-[-1]"><img src="/landing/images/header/shape-2.svg" alt=""></span></div></section>',1)),o("section",O,[o("div",Q,[o("form",{class:"card mt-2 p-4 rounded shadow-xl overflow-hidden",onSubmit:t[14]||(t[14]=j((...e)=>n.store&&n.store(...e),["prevent"])),enctype:"multipart/form-data"},[o("div",R,[o("div",G,[d(_,{modelValue:r.form.first_name,"onUpdate:modelValue":t[0]||(t[0]=e=>r.form.first_name=e),error:r.form.errors.last_name,class:"pr-6 pb-5 md:col-span-6 lg:w-1/3",label:l.$t("First name")},null,8,["modelValue","error","label"]),d(_,{modelValue:r.form.last_name,"onUpdate:modelValue":t[1]||(t[1]=e=>r.form.last_name=e),error:r.form.errors.last_name,class:"pr-6 pb-5 md:col-span-6 lg:w-1/3",label:l.$t("Last name")},null,8,["modelValue","error","label"]),d(_,{modelValue:r.form.email,"onUpdate:modelValue":t[2]||(t[2]=e=>r.form.email=e),error:r.form.errors.email,class:"pb-5 md:col-span-6 lg:w-1/3",label:l.$t("Email Address")},null,8,["modelValue","error","label"]),d(_,{modelValue:r.form.subject,"onUpdate:modelValue":t[3]||(t[3]=e=>r.form.subject=e),error:r.form.errors.subject,class:"pb-5 w-full lg:w-2/3 pr-6",label:l.$t("Subject")},null,8,["modelValue","error","label"]),d(y,{modelValue:r.form.type_id,"onUpdate:modelValue":t[4]||(t[4]=e=>r.form.type_id=e),error:r.form.errors.type_id,class:"pb-5 pr-6 md:col-span-6 lg:w-1/3",label:l.$t("Type")},{default:b(()=>[o("option",Y,a(l.$t("Select a type")),1),(s(!0),i(c,null,g(m.types,e=>(s(),i("option",{key:e.id,value:e.id},a(e.name),9,Z))),128))]),_:1},8,["modelValue","error","label"]),m.hide_ticket_fields.includes("department")?u("",!0):(s(),x(y,{key:0,onChange:t[5]||(t[5]=e=>n.getCategories()),modelValue:r.form.department_id,"onUpdate:modelValue":t[6]||(t[6]=e=>r.form.department_id=e),error:r.form.errors.department_id,class:"pr-6 pb-5 md:col-span-6 lg:w-1/3",label:l.$t("Department")},{default:b(()=>[o("option",J,a(l.$t("Select a department")),1),(s(!0),i(c,null,g(m.departments,e=>(s(),i("option",{key:e.id,value:e.id},a(e.name),9,K))),128))]),_:1},8,["modelValue","error","label"])),r.form.department_id?(s(),x(y,{key:1,ref:"category",onChange:t[7]||(t[7]=e=>n.getSubCategories()),modelValue:r.form.category_id,"onUpdate:modelValue":t[8]||(t[8]=e=>r.form.category_id=e),error:r.form.errors.category_id,class:"pb-5 pr-6 md:col-span-6 lg:w-1/3",label:l.$t("Category")},{default:b(()=>[o("option",P,a(l.$t("Select a category")),1),(s(!0),i(c,null,g(r.categories,e=>(s(),i("option",{key:e.id,value:e.id},a(e.name),9,W))),128))]),_:1},8,["modelValue","error","label"])):u("",!0),r.form.category_id?(s(),x(y,{key:2,ref:"sub_category",modelValue:r.form.sub_category_id,"onUpdate:modelValue":t[9]||(t[9]=e=>r.form.sub_category_id=e),error:r.form.errors.sub_category_id,class:"pb-5 md:col-span-6 lg:w-1/3",label:l.$t("Sub Category")},{default:b(()=>[o("option",X,a(l.$t("Select a sub category")),1),(s(!0),i(c,null,g(r.sub_categories,e=>(s(),i("option",{key:e.id,value:e.id},a(e.name),9,$))),128))]),_:1},8,["modelValue","error","label"])):u("",!0),o("div",ee,[o("label",te,a(l.$t("Request Details"))+":",1),d(k,{theme:"snow",toolbar:"full",content:r.form.details,"onUpdate:content":t[10]||(t[10]=e=>r.form.details=e),contentType:"html"},null,8,["content"])])]),o("div",re,[(s(!0),i(c,null,g(m.custom_fields,e=>(s(),i("div",{class:"flex w-full",key:e.id},[o("div",le,[o("label",{for:["checkbox"].includes(e.type)?null:"ticket_field_"+e.id,class:"block mb-2 text-sm text-gray-900 dark:text-white"},[h(a(e.label)+" ",1),e.required?u("",!0):(s(),i("small",se,"(optional)"))],8,oe),["text","email","number"].includes(e.type)?v((s(),i("input",{key:0,"onUpdate:modelValue":p=>r.form.custom_field[e.name]=p,type:e.type,id:"ticket_field_"+e.id,placeholder:e.placeholder,required:e.required,class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:border-blue-500"},null,8,ae)),[[I,r.form.custom_field[e.name]]]):u("",!0),e.type==="textarea"?v((s(),i("textarea",{key:1,id:"ticket_field_"+e.id,rows:"2","onUpdate:modelValue":p=>r.form.custom_field[e.name]=p,class:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:border-blue-500",placeholder:e.placeholder},null,8,ie)),[[L,r.form.custom_field[e.name]]]):u("",!0),e.hint?(s(),i("p",ne,a(e.hint),1)):u("",!0)])]))),128))]),o("input",{ref:"file",type:"file",accept:".xlsx,.xls,image/*,.doc, .docx,.ppt, .pptx,.txt,.pdf, .zip",class:"hidden",multiple:"multiple",onChange:t[11]||(t[11]=(...e)=>n.fileInputChange&&n.fileInputChange(...e))},null,544),o("div",de,[o("button",{type:"button",class:"btn flex justify-center items-center relative z-10 border-0",onClick:t[12]||(t[12]=(...e)=>n.fileBrowse&&n.fileBrowse(...e))},[d(V,{name:"file",class:"flex-shrink-0 h-8 fill-gray-400 pr-1"}),t[15]||(t[15]=h()),o("h4",null,a(l.$t("Attach files")),1)]),r.form.files.length?(s(!0),i(c,{key:0},g(r.form.files,(e,p)=>(s(),i("div",{class:"flex items-center justify-between pr-6 pt-8 w-full lg:w-1/2",key:p},[o("div",me,[h(a(e.name)+" ",1),o("span",ue,"("+a(n.getFileSize(e.size))+")",1)]),o("button",{type:"button",class:"btn flex justify-center items-center",onClick:xe=>n.fileRemove(e,p)},a(l.$t("Remove")),9,pe)]))),128)):u("",!0)]),o("div",fe,[o("div",ce,[v(o("input",{id:"terms",type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=e=>r.accept_terms=e),class:"w-4 h-4 border border-gray-300 rounded bg-gray-50 focus:ring-3 focus:ring-blue-300 dark:bg-gray-700 dark:border-gray-600 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800",required:""},null,512),[[M,r.accept_terms]])]),o("label",ge,[h(a(l.$t("I agree with the"))+" ",1),o("a",{href:this.route("terms_service"),target:"_blank",class:"text-blue-600 hover:underline dark:text-blue-500"},a(l.$t("terms and conditions")),9,be)])])]),o("div",he,[d(C,{loading:r.form.processing,class:"rounded-lg bg-primary py-3 px-6 text-base font-medium text-white duration-300 ease-in-out hover:bg-opacity-80",type:"submit"},{default:b(()=>[h(a(l.$t("Submit")),1)]),_:1},8,["loading"])])],32)])])])}const Ie=z(N,[["render",_e]]);export{Ie as default};
