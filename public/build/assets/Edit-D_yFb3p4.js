import{r as h,c as a,o,f as u,t as n,e as _,h as f,b as r,a as c,A as T,n as j,H as S,d as V,F as w,j as x,Z as H,i as M,g as y,a2 as k,w as D,k as v}from"./app-CPwLcnNF.js";import{I,h as R}from"./moment-CasOmtLX.js";import{L as z}from"./Layout-B06_GZF8.js";import{T as q}from"./TextInput-D0g38uHN.js";import{_ as A}from"./FlashMessages-D74xr8KL.js";import{v as L}from"./v4-SoommWqA.js";import{S as O}from"./SelectInput-BRU9j1AJ.js";import{T as Q}from"./TextareaInput-BJmiYKSM.js";import{L as K}from"./LoadingButton-ui1ZyLRY.js";import{S as P}from"./SelectInputFilter-BIW2uA1B.js";import{Q as G}from"./vue-quill.snow-CgL_y0na.js";const Z={components:{Icon:I},inheritAttrs:!1,props:{id:{type:String,default(){return`text-input-${L()}`}},type:{type:String,default:"text"},error:String,label:String,editable:{type:[Number,Boolean],default:!1},value:{type:String,default:""},is_required:{type:Boolean,default:!1},placeholder:String,modelValue:String},emits:["update:modelValue"],data(){return{editItem:!1,itemValue:this.value}},methods:{focus(){this.$refs.input.focus()},select(){this.$refs.input.select()},setSelectionRange(i,e){this.$refs.input.setSelectionRange(i,e)}}},J=["for"],W={key:1,class:"font-light text-sm flex gap-3"},X={key:2,class:"w-25 flex items-center"},Y=["id","type","placeholder","value"],$={key:3,class:"form-error"};function ee(i,e,t,F,s,m){const g=h("icon");return o(),a("div",{class:j(i.$attrs.class)},[t.label?(o(),a("label",{key:0,class:"form-label",for:t.id},n(t.label)+" "+n(t.is_required?"*":""),9,J)):u("",!0),s.itemValue&&!s.editItem?(o(),a("div",W,[_(n(t.modelValue)+" ",1),t.editable?(o(),f(g,{key:0,name:"edit",onClick:e[0]||(e[0]=d=>s.editItem=!s.editItem),class:"w-4 h-4 mr-1 cursor-pointer"})):u("",!0)])):u("",!0),s.editItem?(o(),a("div",X,[r("input",T({id:t.id,ref:"input"},{...i.$attrs,class:null},{class:["form-input",{error:t.error}],type:t.type,placeholder:t.placeholder,value:t.modelValue,onInput:e[1]||(e[1]=d=>i.$emit("update:modelValue",d.target.value))}),null,16,Y),c(g,{onClick:e[2]||(e[2]=d=>s.editItem=!1),name:"close",class:"w-4 h-4 ml-2 cursor-pointer"})])):u("",!0),t.error?(o(),a("div",$,n(t.error),1)):u("",!0)],2)}const te=A(Z,[["render",ee]]),se={components:{Icon:I},inheritAttrs:!1,props:{placeholder:{type:String,default:""},onInput:{type:Function},items:{type:Array},id:{type:String,default(){return`select-input-filter-${L()}`}},editable:[Number,Boolean],error:String,label:String,value:String,modelValue:[String,Number,Boolean]},emits:["update:modelValue","update:value","change"],data(){return{selectedValue:"",selected:this.modelValue,isListVisible:!1,editItem:!1,itemValue:this.value}},watch:{selected(i){this.$emit("update:modelValue",i),this.editItem=!1}},created(){},mounted(){document.addEventListener("click",this.close)},methods:{close(i){this.$el.contains(i.target)||(this.isListVisible=!1)},onFocus(){this.isListVisible=!0},selectItem(i,e){this.$refs.input.value=i.name,this.selected=i.id,this.selectedValue=i.name,this.isListVisible=!1,this.editItem=!1,this.itemValue=i.name,this.$emit("update:modelValue",i.id),this.$emit("update:value",i.name),this.$emit("change",e)},focus(){this.$refs.input.focus()},select(){this.$refs.input.select()}}},ie={class:"font-bold text-sm mb-1"},le={key:0,class:"font-light text-sm flex gap-3"},re={class:"w-25 flex items-center"},oe=["id","placeholder"],ne={key:1,class:"form-error"},ae={key:2,class:"i__filter__list"},ue=["onClick"];function de(i,e,t,F,s,m){const g=h("icon");return o(),a("div",{class:j(["sel__filter",i.$attrs.class]),ref:"sel__filter"},[r("div",ie,n(i.$t(t.label)),1),s.itemValue&&!s.editItem?(o(),a("div",le,[_(n(s.itemValue)+" ",1),t.editable?(o(),f(g,{key:0,name:"edit",onClick:e[0]||(e[0]=d=>s.editItem=!s.editItem),class:"w-4 h-4 mr-1 cursor-pointer"})):u("",!0)])):u("",!0),r("div",re,[s.editItem?(o(),a("input",T({key:0,id:t.id,ref:"input",class:["form-select w-25",{error:t.error}],type:"text"},{...i.$attrs,class:null},{placeholder:t.placeholder,onInput:e[1]||(e[1]=(...d)=>t.onInput&&t.onInput(...d)),onFocus:e[2]||(e[2]=(...d)=>m.onFocus&&m.onFocus(...d)),onKeydown:[e[3]||(e[3]=S(V((...d)=>i.onArrowDown&&i.onArrowDown(...d),["prevent"]),["down"])),e[4]||(e[4]=S(V((...d)=>i.onArrowUp&&i.onArrowUp(...d),["prevent"]),["up"])),e[5]||(e[5]=S(V((...d)=>i.selectCurrentSelection&&i.selectCurrentSelection(...d),["prevent"]),["enter","tab"]))],autocomplete:"off"}),null,16,oe)):u("",!0),s.editItem?(o(),f(g,{key:1,onClick:e[6]||(e[6]=d=>s.editItem=!1),name:"close",class:"w-4 h-4 ml-2 cursor-pointer"})):u("",!0)]),t.error?(o(),a("div",ne,n(t.error),1)):u("",!0),s.isListVisible&&t.items.length?(o(),a("div",ae,[r("ul",null,[(o(!0),a(w,null,x(t.items,(d,C)=>(o(),a("li",{key:C,onClick:p=>m.selectItem(d,i.e)},n(d.name),9,ue))),128))])])):u("",!0)],2)}const me=A(se,[["render",de]]),ce={components:{LoadingButton:K,SelectInput:O,TextInput:q,TextEditInput:te,TextareaInput:Q,Link:M,Head:H,Icon:I,SelectInputFilter:P,SelectEditInput:me,QuillEditor:G},layout:z,props:{title:String,ticket:Object,priorities:Array,statuses:Array,types:Array,departments:Array,all_categories:{required:!1},customers:Array,usersExceptCustomers:Array,attachments:Array,comments:Array,auth:Object,entries:Object,hidden_fields:Object},remember:!1,data(){return{user:this.$page.props.auth.user,is_team_head:!1,type_status:[],categories:this.all_categories.filter(i=>i.department_id===this.ticket.department_id),sub_categories:this.all_categories.filter(i=>i.parent_id===this.ticket.category_id),comment:"",editCustomer:!1,enableEditor:!1,user_access:this.$page.props.auth.user.access,department_users:this.usersExceptCustomers,form:this.$inertia.form({user_id:this.ticket.user_id,priority_id:this.ticket.priority_id,status_id:this.ticket.status_id,department_id:this.ticket.department_id,category_id:this.ticket.category_id??null,sub_category_id:this.ticket.sub_category_id,assigned_to:this.ticket.assigned_to,type_id:this.ticket.type_id,subject:this.ticket.subject,details:this.ticket.details,files:this.ticket.files,comments:this.ticket.comments,created_at:this.ticket.created_at,removedFiles:[],rating:0,review:""})}},created(){this.auth.user.role.slug==="customer"&&this.statuses.length?this.type_status=this.statuses.filter(i=>i.id===this.form.status_id||i.name.match(/Close.*/)):this.type_status=this.statuses,this.moment=R,this.isTeamHead()},methods:{isTeamHead(){this.ticket.department_id&&this.auth.user.role.slug!=="admin"&&v.get(this.route("department.team_head",{department:this.ticket.department_id,user:this.user.id})).then(i=>{this.is_team_head=i.data})},getCategories(){this.ticket.category="N/A",this.form.category_id=null,this.categories=this.all_categories.filter(i=>i.department_id===this.form.department_id),v.get(this.route("departmental_teams.members",{department:this.form.department_id})).then(i=>{this.department_users=i.data})},getSubCategories(){this.sub_categories=this.all_categories.filter(i=>i.parent_id===this.form.category_id),this.ticket.sub_category="N/A",this.form.sub_category_id=null},doFilter(i){v.get(this.route("filter.customers",{search:i.target.value})).then(e=>{this.customers.splice(0,this.customers.length,...e.data)})},doFilterUsersExceptCustomer(i){if(i.target.value===""||i.target.value===null){this.department_users=this.usersExceptCustomers;return}v.get(this.route("filter.users_except_customer",{search:i.target.value})).then(e=>{this.department_users=e.data})},fileInputChange(i){let e=i.target.files;for(let t=0;t<e.length;t++)this.form.files.push(e[t])},fileRemove(i,e){this.form.files.splice(e,1)},fileBrowse(){this.$refs.file.click()},downloadAttachment(i){const e=document.createElement("a");e.href=window.location.origin+"/files/"+i.path,e.download=i.name,e.click()},removeAttachment(i,e){this.attachments.splice(e,1),this.form.removedFiles.push(i.id)},getFileSize(i){const e=Math.floor(Math.log(i)/Math.log(1024));return(i/Math.pow(1024,e)).toFixed(2)*1+" "+["B","KB","MB","GB","TB"][e]},uploadFiles(){this.form.files=this.$refs.files.files},update(){this.form.post(this.route("tickets.update",this.ticket.id)),this.form.files=[],this.form.comment=""},destroy(){confirm("Are you sure you want to delete this ticket?")&&this.$inertia.delete(this.route("tickets.destroy",this.ticket.id))},restore(){confirm("Are you sure you want to restore this ticket?")&&this.$inertia.put(this.route("tickets.restore",this.ticket.id))},submitComment(){var i=this;const e={comment:this.comment,user_id:this.user.id,_token:this.$page.props.csrf_token,ticket_id:this.ticket.id};this.comment="",v.post(this.route("ticket.comment"),e).then(t=>{t.data&&i.comments.push(t.data),this.$emit("comment submitted!")}).catch(t=>{console.log(t)})}}},fe={class:"flex flex-wrap"},he={class:"max-w-full lg:w-3/5"},_e={class:"p-8 -mr-6 -mb-8 flex flex-wrap"},ge={class:"assigned_user pr-6 pb-8 w-full lg:w-1/3 flex flex-col"},be={class:"font-bold text-sm mb-1"},pe={class:"font-light text-sm"},ye={class:"font-bold text-sm mb-1"},ke={class:"font-light text-sm"},ve={class:"assigned_user pr-6 pb-8 w-full lg:w-full flex flex-col"},we={class:"w-25 flex gap-3"},xe={class:"form-label"},Ve=["innerHTML"],Ce={key:1,class:"w-25 flex items-center ticket_details_area"},Se={class:"w-4 h-4 cursor-pointer"},Ie={class:"pr-6 pb-8 w-full lg:w-full flex-col"},Ae={class:"flex-1 pr-1"},Fe={class:"text-gray-500 text-xs"},Ee=["href"],Ue={class:"text-sm"},Te={class:"a__buttons flex justify-end items-center"},je=["onClick"],Le=["onClick"],Be={class:"flex-1 pr-1"},Ne={class:"text-gray-500 text-xs"},He=["onClick"],Me={key:6,class:"pr-6 pb-8 w-full lg:w-1/3 flex items-center"},De={key:7,class:"flex flex-col w-full"},Re={class:"assigned_user star__review pb-5 w-full lg:w-1/3 flex flex-col"},ze={class:"font-bold"},qe={class:"star-rating pt-5"},Oe={class:"flex lg:w-1/4 mb-4"},Qe={class:"btn-indigo",type:"submit"},Ke={class:"px-8 py-4 bg-gray-50 border-t border-gray-100 flex items-center"},Pe={class:"max-w-full lg:w-2/5"},Ge={class:"bg-white rounded-md shadow overflow-hidden ml-2 chat-area comment-box flex-1 flex flex-col"},Ze={class:"flex-3"},Je={class:"chat-header flex flex-col pb-3"},We={class:"text-xl"},Xe={class:"text-sm font-light"},Ye={class:"messages flex-1 overflow-auto reverse__order"},$e={key:0,class:"flex-2"},et={class:"w-12 h-12 relative"},tt={key:0,class:"w-12 h-12 rounded-full mx-auto user_icon",alt:"chat-user"},st={key:1,class:"flex-1 px-2 mt__wrap"},it={key:0,class:"font-bold pb-2 text-sm pt-1"},lt=["innerHTML"],rt={class:"pl-4"},ot={class:"text-gray-500"},nt={key:2,class:"flex-1 mt__wrap px-2 text-right"},at=["innerHTML"],ut={class:"pr-4"},dt={class:"text-gray-500"},mt={class:"flex-2 pt-4 pb-3"},ct={class:"write bg-white shadow flex rounded-lg"},ft={class:"flex-1 ticket_comment_edit"},ht={class:"flex-2 w-35 p-2 flex content-center items-center"},_t={class:"flex-1"};function gt(i,e,t,F,s,m){const g=h("Head"),d=h("select-edit-input"),C=h("text-edit-input"),p=h("icon"),E=h("QuillEditor"),B=h("textarea-input"),N=h("loading-button");return o(),a("div",null,[c(g,{title:i.$t(t.title)},null,8,["title"]),r("div",fe,[r("div",he,[r("form",{onSubmit:e[23]||(e[23]=V((...l)=>m.update&&m.update(...l),["prevent"])),class:"bg-white rounded-md shadow overflow-hidden mr-2"},[r("div",_e,[t.auth.user.role.slug!=="customer"?(o(),f(d,{key:0,placeholder:"Search customer",onInput:m.doFilter,items:t.customers,modelValue:s.form.user_id,"onUpdate:modelValue":e[0]||(e[0]=l=>s.form.user_id=l),error:s.form.errors.user_id,class:"pr-6 pb-8 w-full lg:w-1/3",label:i.$t("Customer"),value:t.ticket.user,editable:s.user_access.ticket.update&&!t.ticket.closed},null,8,["onInput","items","modelValue","error","label","value","editable"])):u("",!0),c(d,{placeholder:"Search priority",items:t.priorities,modelValue:s.form.priority_id,"onUpdate:modelValue":e[1]||(e[1]=l=>s.form.priority_id=l),error:s.form.errors.priority_id,class:"pr-6 pb-8 w-full lg:w-1/3",label:i.$t("Priority"),value:t.ticket.priority,editable:s.user_access.ticket.update&&!t.ticket.closed},null,8,["items","modelValue","error","label","value","editable"]),t.auth.user.role.slug!=="customer"&&!(t.hidden_fields&&t.hidden_fields.includes("assigned_to"))?(o(),f(d,{key:1,placeholder:"Search user",onInput:m.doFilterUsersExceptCustomer,items:s.department_users,modelValue:s.form.assigned_to,"onUpdate:modelValue":e[2]||(e[2]=l=>s.form.assigned_to=l),error:s.form.errors.assigned_to,class:"pr-6 pb-8 w-full lg:w-1/3",label:i.$t("Assigned to"),value:t.ticket.assigned_user??"Not Assigned",editable:s.user_access.ticket.update&&!t.ticket.closed&&t.auth.user.role.slug==="admin"||s.is_team_head},null,8,["onInput","items","modelValue","error","label","value","editable"])):u("",!0),c(d,{placeholder:"Select status to change",items:t.statuses,modelValue:s.form.status_id,"onUpdate:modelValue":e[3]||(e[3]=l=>s.form.status_id=l),error:s.form.errors.status_id,class:"pr-6 pb-8 w-full lg:w-1/3",label:i.$t("Status"),value:t.ticket.status?t.ticket.status.name:"N/A",editable:t.auth.user.role.slug!=="customer"&&s.user_access.ticket.update&&!t.ticket.closed},null,8,["items","modelValue","error","label","value","editable"]),t.hidden_fields&&t.hidden_fields.includes("ticket_type")?u("",!0):(o(),f(d,{key:2,placeholder:"Search type",items:t.types,modelValue:s.form.type_id,"onUpdate:modelValue":e[4]||(e[4]=l=>s.form.type_id=l),error:s.form.errors.type_id,class:"pr-6 pb-8 w-full lg:w-1/3",label:i.$t("Ticket type"),value:t.ticket.type,editable:s.user_access.ticket.update&&!t.ticket.closed},null,8,["items","modelValue","error","label","value","editable"])),t.hidden_fields&&t.hidden_fields.includes("department")?u("",!0):(o(),f(d,{key:3,onChange:e[5]||(e[5]=l=>m.getCategories()),placeholder:"Search department",items:t.departments,modelValue:s.form.department_id,"onUpdate:modelValue":e[6]||(e[6]=l=>s.form.department_id=l),error:s.form.errors.department_id,class:"pr-6 pb-8 w-full lg:w-1/3",label:i.$t("Department"),value:t.ticket.department,editable:s.user_access.ticket.update&&!t.ticket.closed&&t.auth.user.role.slug==="admin"||s.is_team_head},null,8,["items","modelValue","error","label","value","editable"])),!(t.hidden_fields&&t.hidden_fields.includes("category"))&&s.form.department_id?(o(),f(d,{key:4,ref:"category",onChange:e[7]||(e[7]=l=>m.getSubCategories()),placeholder:"Search category",items:s.categories,modelValue:s.form.category_id,"onUpdate:modelValue":e[8]||(e[8]=l=>s.form.category_id=l),error:s.form.errors.category_id,class:"pr-6 pb-8 w-full lg:w-1/3",label:i.$t("Category"),value:t.ticket.category,editable:s.user_access.ticket.update&&!t.ticket.closed},null,8,["items","modelValue","error","label","value","editable"])):u("",!0),!(t.hidden_fields&&t.hidden_fields.includes("category"))&&s.form.category_id?(o(),f(d,{key:5,ref:"sub_category",placeholder:"Search category",items:s.sub_categories,modelValue:s.form.sub_category_id,"onUpdate:modelValue":e[9]||(e[9]=l=>s.form.sub_category_id=l),error:s.form.errors.sub_category_id,class:"pr-6 pb-8 w-full lg:w-1/3",label:i.$t("Sub Category"),value:t.ticket.sub_category,editable:s.user_access.ticket.update&&!t.ticket.closed},null,8,["items","modelValue","error","label","value","editable"])):u("",!0),r("div",ge,[r("div",be,n(i.$t("Created")),1),r("div",pe,n(i.moment(t.ticket.created_at).fromNow()),1)]),(o(!0),a(w,null,x(t.entries,l=>(o(),a("div",{class:"assigned_user pr-6 pb-8 w-full lg:w-1/3 flex flex-col",key:l.id},[r("div",ye,n(i.$t(l.label)),1),r("div",ke,n(l.value),1)]))),128)),c(C,{editable:s.user_access.ticket.update&&!t.ticket.closed,modelValue:s.form.subject,"onUpdate:modelValue":e[10]||(e[10]=l=>s.form.subject=l),value:t.ticket.subject,error:s.form.errors.subject,class:"pr-6 pb-8 w-full lg:w-2/3",label:i.$t("Subject")},null,8,["editable","modelValue","value","error","label"]),r("div",ve,[r("div",we,[r("label",xe,n(i.$t("Request Details")),1),!s.enableEditor&&s.user_access.ticket.update&&!t.ticket.closed?(o(),f(p,{key:0,name:"edit",onClick:e[11]||(e[11]=l=>s.enableEditor=!s.enableEditor),class:"w-4 h-4 mr-1 cursor-pointer"})):u("",!0)]),s.enableEditor?u("",!0):(o(),a("div",{key:0,class:"font-light text-sm",innerHTML:t.ticket.details},null,8,Ve)),s.enableEditor?(o(),a("div",Ce,[c(E,{theme:"snow",toolbar:"full",content:s.form.details,"onUpdate:content":e[12]||(e[12]=l=>s.form.details=l),contentType:"html"},null,8,["content"]),r("div",Se,[c(p,{onClick:e[13]||(e[13]=l=>s.enableEditor=!1),name:"close",class:"w-4 h-4 ml-2 cursor-pointer"})])])):u("",!0)]),r("input",{ref:"file",type:"file",accept:".xlsx,.xls,image/*,.doc, .docx,.ppt, .pptx,.txt,.pdf, .zip",class:"hidden",multiple:"multiple",onChange:e[14]||(e[14]=(...l)=>m.fileInputChange&&m.fileInputChange(...l))},null,544),r("div",Ie,[r("button",{type:"button",class:"btn flex justify-center items-center pb-3 border-0 pl-0",onClick:e[15]||(e[15]=(...l)=>m.fileBrowse&&m.fileBrowse(...l))},[c(p,{name:"file",class:"flex-shrink-0 h-5 fill-gray-400 pr-1"}),e[26]||(e[26]=_()),r("strong",null,n(i.$t("Attach File")),1)]),t.attachments.length?(o(!0),a(w,{key:0},x(t.attachments,(l,b)=>(o(),a("div",{class:"flex items-center justify-between pr-6 pt-8 w-full",key:b},[r("div",Ae,[_(n(l.name)+" ",1),r("span",Fe,"("+n(m.getFileSize(l.size))+")",1),e[27]||(e[27]=_()),l.user?(o(),a("a",{key:0,class:"text-sm",href:this.route("users.edit",l.user.id)},n(l.user.first_name)+" "+n(l.user.last_name),9,Ee)):u("",!0),e[28]||(e[28]=_(" at ")),r("span",Ue,n(l.created_at),1)]),r("div",Te,[r("button",{type:"button",class:"btn flex items-center",onClick:U=>m.downloadAttachment(l)},n(i.$t("Download")),9,je),r("button",{type:"button",class:"btn flex items-center ml-3",onClick:U=>m.removeAttachment(l,b)},n(i.$t("Remove")),9,Le)])]))),128)):u("",!0),s.form.files.length?(o(!0),a(w,{key:1},x(s.form.files,(l,b)=>(o(),a("div",{class:"flex items-center justify-between pr-6 pt-8 w-full lg:w-1/2",key:b},[r("div",Be,[_(n(l.name)+" ",1),r("span",Ne,"("+n(m.getFileSize(l.size))+")",1)]),s.user_access.ticket.delete&&t.ticket.status&&!t.ticket.closed?(o(),a("button",{key:0,type:"button",class:"btn flex justify-center items-center",onClick:U=>m.fileRemove(l,b)},n(i.$t("Remove")),9,He)):u("",!0)]))),128)):u("",!0)]),t.ticket.status&&t.ticket.closed&&t.ticket.review?(o(),a("div",Me,[r("strong",null,n(i.$t("Rating"))+": ",1),_("   "+n(t.ticket.review.rating)+" ",1),r("p",null,n(t.ticket.review.review),1)])):u("",!0),t.ticket.status&&t.ticket.closed&&!t.ticket.review&&t.auth.user.role.slug==="customer"?(o(),a("div",De,[r("div",Re,[r("div",ze,n(i.$t("How do you rate this support service?")),1),r("div",qe,[y(r("input",{type:"radio",id:"5-stars",name:"rating","onUpdate:modelValue":e[16]||(e[16]=l=>s.form.rating=l),value:"5"},null,512),[[k,s.form.rating]]),e[29]||(e[29]=r("label",{for:"5-stars",class:"star"},"★",-1)),y(r("input",{type:"radio",id:"4-stars",name:"rating","onUpdate:modelValue":e[17]||(e[17]=l=>s.form.rating=l),value:"4"},null,512),[[k,s.form.rating]]),e[30]||(e[30]=r("label",{for:"4-stars",class:"star"},"★",-1)),y(r("input",{type:"radio",id:"3-stars",name:"rating","onUpdate:modelValue":e[18]||(e[18]=l=>s.form.rating=l),value:"3"},null,512),[[k,s.form.rating]]),e[31]||(e[31]=r("label",{for:"3-stars",class:"star"},"★",-1)),y(r("input",{type:"radio",id:"2-stars",name:"rating","onUpdate:modelValue":e[19]||(e[19]=l=>s.form.rating=l),value:"2"},null,512),[[k,s.form.rating]]),e[32]||(e[32]=r("label",{for:"2-stars",class:"star"},"★",-1)),y(r("input",{type:"radio",id:"1-star",name:"rating","onUpdate:modelValue":e[20]||(e[20]=l=>s.form.rating=l),value:"1"},null,512),[[k,s.form.rating]]),e[33]||(e[33]=r("label",{for:"1-star",class:"star"},"★",-1))])]),c(B,{modelValue:s.form.review,"onUpdate:modelValue":e[21]||(e[21]=l=>s.form.review=l),error:s.form.errors.review,class:"pr-6 pb-4 w-full lg:w-1/3",label:i.$t("Feedback")},null,8,["modelValue","error","label"]),r("div",Oe,[r("button",Qe,n(i.$t("Submit")),1)])])):u("",!0)]),r("div",Ke,[s.user_access.ticket.delete?(o(),a("button",{key:0,class:"text-red-600 hover:underline",tabindex:"-1",type:"button",onClick:e[22]||(e[22]=(...l)=>m.destroy&&m.destroy(...l))},n(i.$t("Delete")),1)):u("",!0),c(N,{loading:s.form.processing,class:"btn-indigo ml-auto",type:"submit"},{default:D(()=>[_(n(i.$t("Save")),1)]),_:1},8,["loading"])])],32)]),r("div",Pe,[r("div",Ge,[r("div",Ze,[r("div",Je,[r("h3",We,n(i.$t("Ticket discussion")),1),r("p",Xe,n(i.$t("Comment histories for this ticket will be available here.")),1)])]),r("div",Ye,[(o(!0),a(w,null,x(t.comments.slice().reverse(),(l,b)=>(o(),a("div",{key:b,class:"message mb-4 flex"},[l.user_id!==s.user.id?(o(),a("div",$e,[r("div",et,[l.user?(o(),a("span",tt,n(Array.from(l.user.first_name)[0]),1)):u("",!0)])])):u("",!0),l.user_id!==s.user.id?(o(),a("div",st,[l.user?(o(),a("h3",it,n(l.user.first_name)+" "+n(l.user.last_name),1)):u("",!0),r("div",{class:"inline-block bg-gray-300 user-comment-round p-2 px-3 text-gray-700 leading-5 ckc",innerHTML:l.details},null,8,lt),r("div",rt,[r("small",ot,n(i.moment(l.updated_at).fromNow(!0)),1)])])):u("",!0),l.user_id===s.user.id?(o(),a("div",nt,[r("div",{class:"inline-block bg-blue rounded p-2 px-3 text-white leading-5 ckc",innerHTML:l.details},null,8,at),r("div",ut,[r("small",dt,n(i.moment(l.updated_at).fromNow(!0)),1)])])):u("",!0)]))),128))]),r("div",mt,[r("div",ct,[r("div",ft,[c(E,{theme:"snow",toolbar:"full",content:s.comment,"onUpdate:content":e[24]||(e[24]=l=>s.comment=l),contentType:"html"},null,8,["content"])]),r("div",ht,[r("div",_t,[r("button",{class:"bg-blue w-10 h-10 rounded-full flex justify-center items-center",onClick:e[25]||(e[25]=(...l)=>m.submitComment&&m.submitComment(...l))},[c(p,{class:"w-4 h-4 fill-gray-100",name:"send"})])])])])])])])])])}const At=A(ce,[["render",gt]]);export{At as default};
