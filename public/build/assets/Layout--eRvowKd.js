import{I as A,D as T,h as j}from"./moment-DA23P4QD.js";import{_ as U,L as q,F as D}from"./FlashMessages-C6H-nqCg.js";import{i as N,r as v,c as i,o as r,F as C,j as M,p as E,G as I,a as n,f as b,w as g,b as t,t as c,n as x,h as $,u as k,Q as H,x as V,d as L,H as S,e as y,N as B,z as Y,A as G,k as P,I as F,m as O,q as R}from"./app-D__lrmcb.js";const Z={components:{Icon:A,Link:N},data(){return{user:null,menu_items:[{name:"Dashboard",route:"dashboard",url:"dashboard",icon:"dashboard"},{name:"Tickets",route:"tickets",url:"tickets",icon:"ticket"}],enable_option:{}}},methods:{isUrl(...e){let s=this.$page.url.substr(1);return s=s.replace("dashboard/",""),e[0]===""?s==="":e.filter(o=>s.startsWith(o)).length},addActiveClass(e){e.currentTarget.classList.toggle("hover")}},created(){this.user=this.$page.props.auth.user;const e=this.user.access;let s={};this.$page.props.enable_options&&JSON.parse(this.$page.props.enable_options.value).forEach(u=>{s[u.slug]=!!u.value}),s.chat&&(e.chat.read||e.chat.update||e.chat.create||e.chat.delete)&&this.menu_items.push({name:"Chat",route:"chat",url:"chat",icon:"chat"}),s.faq&&(e.faq.read||e.faq.update||e.faq.create||e.faq.delete)&&this.menu_items.push({name:"FAQs",route:"faqs",url:"faqs",icon:"faq"}),s.blog&&(e.blog.read||e.blog.update||e.blog.create||e.blog.delete)&&this.menu_items.push({name:"Blog",route:"posts",url:"posts",icon:"post"}),s.kb&&(e.knowledge_base.read||e.knowledge_base.update||e.knowledge_base.create||e.knowledge_base.delete)&&this.menu_items.push({name:"Knowledge Base",route:"knowledge_base",url:"knowledge_base",icon:"knowledge"}),(e.customer.read||e.customer.update||e.customer.create||e.customer.delete)&&this.menu_items.push({name:"Customers",route:"customers",url:"customers",icon:"all_users"}),s.note&&this.menu_items.push({name:"Notes",route:"notes",url:"notes",icon:"notes"}),s.contact&&(e.contact.read||e.contact.update||e.contact.create||e.contact.delete)&&this.menu_items.push({name:"Contacts",route:"contacts",url:"contacts",icon:"contact"}),s.organization&&(e.organization.read||e.organization.update||e.organization.create||e.organization.delete)&&this.menu_items.push({name:"Organizations",route:"organizations",url:"organizations",icon:"office"}),(e.user.read||e.user.update||e.user.create||e.user.delete)&&this.menu_items.push({name:"Manage Users",route:"users",url:"users",icon:"users"});const o=[];this.user.role.slug==="admin"&&(o.push({name:"License",route:"license.settings",url:"settings/license",icon:"user_role"}),o.push({name:"User Roles",route:"roles",url:"settings/roles",icon:"user_role"})),(e.global.read||e.global.update||e.global.create||e.global.delete)&&o.push({name:"Global",route:"global",url:"settings/global",icon:"global_setting"}),(e.global.read||e.global.update||e.global.create||e.global.delete)&&o.push({name:"Custom fields",route:"tickets.builder",url:"settings/custom-form",icon:"form-builder"}),(e.department.read||e.department.update||e.department.create||e.department.delete)&&o.push({name:"Departments",route:"departments",url:"settings/departments",icon:"departments"}),(e.category.read||e.category.update||e.category.create||e.category.delete)&&o.push({name:"Categories",route:"categories",url:"settings/categories",icon:"category"}),(e.status.read||e.status.update||e.status.create||e.status.delete)&&o.push({name:"Status",route:"statuses",url:"settings/statuses",icon:"status"}),(e.priority.read||e.priority.update||e.priority.create||e.priority.delete)&&o.push({name:"Priorities",route:"priorities",url:"settings/priorities",icon:"priorities"}),(e.type.read||e.type.update||e.type.create||e.type.delete)&&o.push({name:"Types",route:"types",url:"settings/types",icon:"types"}),(e.language.read||e.language.update||e.language.create||e.language.delete)&&o.push({name:"Languages",route:"languages",url:"settings/languages",icon:"edit"}),(e.email_template.read||e.email_template.update||e.email_template.create||e.email_template.delete)&&o.push({name:"Email Templates",route:"templates",url:"settings/templates",icon:"email"}),(e.smtp.read||e.smtp.update||e.smtp.create||e.smtp.delete)&&o.push({name:"SMTP Mail",route:"settings.smtp",url:"settings/smtp",icon:"email_template"}),(e.pusher.read||e.pusher.update||e.pusher.create||e.pusher.delete)&&o.push({name:"Pusher Chat",route:"settings.pusher",url:"settings/pusher",icon:"chat"}),this.user.role.slug==="admin"&&o.push({name:"Email to ticket",route:"settings.piping",url:"settings/piping",icon:"ticket"}),o.length&&this.menu_items.push({name:"Settings",route:"",url:"settings",icon:"settings",submenu:o}),(e.front_page.read||e.front_page.update||e.front_page.create||e.front_page.delete)&&this.menu_items.push({name:"Front Pages",route:"",url:"front_pages",icon:"gear",submenu:[{name:"Home",route:"front_pages.page",url:"front_pages/home",icon:"page",param:"home"},{name:"Contact",route:"front_pages.page",url:"front_pages/contact",icon:"page",param:"contact"},{name:"Services",route:"front_pages.page",url:"front_pages/services",icon:"page",param:"services"},{name:"Privacy Policy",route:"front_pages.page",url:"front_pages/privacy",icon:"page",param:"privacy"},{name:"Terms of services",route:"front_pages.page",url:"front_pages/terms",icon:"page",param:"terms"},{name:"Footer",route:"front_pages.page",url:"front_pages/footer",icon:"page",param:"footer"}]})}},Q={class:"menu__name"},J={key:0,class:"sub-menu-items"},K={class:"menu__name"};function W(e,s,o,h,u,p){const f=v("icon"),_=v("Link");return r(),i("div",null,[(r(!0),i(C,null,M(u.menu_items,(m,d)=>(r(),i("div",E({class:["menu-item",p.isUrl(m.url)?" active":""],key:d},I(m.submenu?{click:a=>p.addActiveClass(a)}:{})),[n(_,{class:x(["flex items-center group py-3 menu-link",{"have-sub-menu":m.submenu}]),href:m.route?e.route(m.route):"#"},{default:g(()=>[n(f,{name:m.icon,class:"w-5 h-5 mr-3 rtl:ml-3 menu__icon"},null,8,["name"]),t("div",Q,c(e.$t(m.name)),1)]),_:2},1032,["href","class"]),m.submenu?(r(),i("div",J,[(r(!0),i(C,null,M(m.submenu,(a,l)=>(r(),$(_,{class:x(["sub-menu-item",this.isUrl(a.url)?" active":""]),key:l,href:a.param?e.route(a.route,a.param):e.route(a.route)},{default:g(()=>[a.icon?(r(),$(f,{key:0,name:a.icon,class:"w-4 h-4 mr-1 rtl:ml-1 menu__icon"},null,8,["name"])):(r(),$(f,{key:1,name:"dash",class:"w-4 h-4 mr-1 rtl:mr-1 menu__icon"})),t("div",K,c(e.$t(a.name)),1)]),_:2},1032,["class","href"]))),128))])):b("",!0)],16))),128))])}const X=U(Z,[["render",W]]);function ee(e,s){return r(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function te(e,s){return r(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z"})])}const se={class:"relative flex"},oe={key:0,class:"absolute -top-1 -right-1 h-5 w-5 rounded-full bg-red-500 text-white text-xs flex items-center justify-center"},ae={class:"flex justify-between items-center px-4 py-2 text-sm text-gray-700 font-bold border-b"},re={class:"relative"},ne={key:0,class:"max-h-96 overflow-y-auto"},ie=["onClick"],le={class:"text-gray-800"},ue={class:"text-xs text-gray-400 mt-1"},ce={key:1,class:"px-4 py-5 text-center"},de={__name:"NotificationBell",setup(e){const s=k(!1),o=k(!1),h=k(!1),u=H(),p=k(u.props.notifications||[]),f=k(u.props.notification_count||0),_=d=>{B.post(route("notifications.read",d.id),{},{onSuccess:()=>{s.value=!1}})},m=()=>{B.post(route("notifications.markAllAsRead"),{},{preserveScroll:!0,onSuccess:()=>{p.value.forEach(d=>d.read_at=new Date().toISOString()),f.value=0,o.value=!1,s.value=!1}})};return V(()=>{window.Echo&&u.props.auth.user&&window.Echo.private(`App.Models.User.${u.props.auth.user.id}`).notification(d=>{const a={id:d.id,data:{...d},read_at:null};p.value.unshift(a),f.value++,h.value=!0,setTimeout(()=>{h.value=!1},700)})}),(d,a)=>(r(),i("div",se,[t("button",{onClick:a[0]||(a[0]=l=>s.value=!s.value),type:"button",class:"relative rounded-full text-gray-600 hover:text-black focus:outline-none"},[a[4]||(a[4]=t("span",{class:"sr-only"},"View notifications",-1)),n(A,{name:"notification",class:x(["h-7 w-7",{"animate-bell-shake":h.value}]),"aria-hidden":"true"},null,8,["class"]),f.value>0?(r(),i("span",oe,c(f.value),1)):b("",!0)]),s.value?(r(),i("div",{key:0,onClick:a[3]||(a[3]=l=>s.value=!1),class:"absolute right-0 z-10 top-7 w-80 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},[t("div",ae,[a[6]||(a[6]=t("span",null,"Notifications",-1)),t("div",re,[t("button",{onClick:a[1]||(a[1]=L(l=>o.value=!o.value,["stop"])),class:"p-1 rounded-full hover:bg-gray-200"},[n(S(te),{class:"h-5 w-5"})]),o.value?(r(),i("div",{key:0,onClick:a[2]||(a[2]=l=>o.value=!1),class:"absolute right-0 mt-1 w-48 bg-white rounded-md shadow-lg py-1 ring-1 ring-black ring-opacity-5"},[t("a",{onClick:L(m,["prevent"]),href:"#",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},"Mark all as read"),n(S(N),{href:d.route("notifications.index"),class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},{default:g(()=>a[5]||(a[5]=[y("All Notifications")])),_:1,__:[5]},8,["href"])])):b("",!0)])]),p.value.length>0?(r(),i("div",ne,[(r(!0),i(C,null,M(p.value,l=>(r(),i("a",{key:l.id,onClick:L(z=>_(l),["prevent"]),href:"#",class:x(["block px-4 py-3 text-sm text-gray-600 hover:bg-gray-100 border-b",{"font-semibold":!l.read_at}])},[t("p",le,c(l.data.message),1),t("p",ue,c(d.$t("Ticket"))+": "+c(l.data.ticket_subject),1)],10,ie))),128))])):(r(),i("div",ce,[n(S(ee),{class:"h-8 w-8 text-green-400 mx-auto mb-2"}),a[7]||(a[7]=t("p",{class:"text-sm text-gray-500"},"You're all caught up!",-1))]))])):b("",!0)]))}},pe={components:{NotificationBell:de,Dropdown:T,FlashMessages:D,Icon:A,Logo:q,Link:N,MainMenu:X},props:{title:String},data(){return{time:"",current_mode:"light",modes:["dark","light"],edit_route:"",locale:this.$page.props.auth.user.locale||this.$page.props.settings.default_language}},computed:{selected_language(){return this.$page.props.languages.find(e=>e.code===this.$page.props.locale)},languages_except_selected(){return this.$page.props.languages.filter(e=>e.code!==this.$page.props.locale)}},setup(){const e=H();return{license_invalid:F(()=>e.props.license_invalid)}},methods:{updateLanguage(e){P.post(this.route("language",e),{}).then(s=>{s.data&&window.location.reload()})},generateGreetings(){const e=this.moment().format("HH");return e>=3&&e<12?"Good Morning":e>=12&&e<15?"Good Noon":e>=15&&e<18?"Good Afternoon":e>=18&&e<20?"Good Evening":"Hello"},switchMode(){this.current_mode=this.current_mode==="light"?"dark":"light",localStorage.setItem("current_mode",this.current_mode)},detectCurrentUrl(){const e=this.$page.url,s=e.split("/");let o=["edit","create"].includes(e.substring(e.lastIndexOf("/")+1));o||(o=s[s.length-2]==="tickets");let h=e.split("/")[2];["settings","front_pages"].includes(h)&&(h=e.split("/")[3]),this.edit_route=o?h:""}},updated(){this.detectCurrentUrl()},created(){this.moment=j;let e=this;localStorage.getItem("current_mode")&&(this.current_mode=localStorage.getItem("current_mode")),e.time=e.moment().format("MMMM Do YYYY, h:mm A"),window.setInterval(function(){e.time=e.moment().format("MMMM Do YYYY, h:mm A")},1e3),this.detectCurrentUrl(),Y()!==this.locale&&G(this.locale)}},me=["dir"],ge={class:"md:flex md:flex-col"},he={class:"md:h-screen md:flex md:flex-col"},fe={class:"md:flex md:shrink-0"},_e={class:"md:shrink-0 md:py-2 md:w-60 flex items-center justify-between md:justify-center sidebar-left-top"},ve={class:"mt-2 px-8 py-4 bg-hd-sidebar rounded shadow-lg"},we={class:"bg-white w-full p-4 md:py-2 md:pr-12 md:pl-8 text-sm flex justify-first items-center top_bar"},ye={class:"placement-top-left"},be={class:"mt-1 welcome_text"},ke={class:"display-time"},xe={class:"time"},$e={class:"placement-top-right flex items-center gap-4 pr-2"},Ce={class:"flex items-center gap-1 rounded transition cursor-pointer","aria-label":"Language",title:"Change Language"},Me={class:"py-0 shadow-xl rounded text-sm language_menu_list"},Le=["onClick"],Se={class:"lang_name rtl:mr-[6px]"},Ae={class:"flex items-center cursor-pointer group"},Ne={class:"mr-1 whitespace-nowrap"},ze=["alt","src"],Be={key:1,src:"/images/svg/profile.svg",class:"w-5 h-5",alt:"user profile"},Ue={class:"shadow-xl bg-white rounded text-sm"},He={class:"flex px-4 flex-col py-3"},Te={class:"flex gap-1 items-center"},je={class:"flex"},qe=["alt","src"],De={key:1,src:"/images/svg/profile.svg",class:"w-10 h-10",alt:"user profile"},Ee={class:"flex flex-col gap-[1px]"},Ie={class:"md:flex md:flex-grow md:overflow-hidden"},Ve={class:"md:flex-1 md:overflow-y-auto","scroll-region":""},Ye={class:"container-head"},Ge={class:"ch-left"},Pe={class:"page-title"},Fe={class:"breadcrumb text-sm"},Oe={key:1,class:"b-item"},Re={class:"b-item"},Ze={class:"ch-right cursor-pointer"},Qe=["aria-label"],Je={class:"sec-cont"};function Ke(e,s,o,h,u,p){const f=v("logo"),_=v("Link"),m=v("main-menu"),d=v("dropdown"),a=v("NotificationBell"),l=v("icon"),z=v("flash-messages");return r(),i("div",{class:x(["layout-app",u.current_mode]),dir:e.$page.props.dir},[s[6]||(s[6]=t("div",{id:"dropdown"},null,-1)),t("div",ge,[t("div",he,[t("div",fe,[t("div",_e,[n(_,{class:"mt-1",href:"/"},{default:g(()=>[n(f,{class:"help-desk-logo"})]),_:1}),n(d,{class:"md:hidden",className:"small-menu",placement:"bottom-end"},{default:g(()=>s[1]||(s[1]=[t("svg",{class:"w-6 h-6 mobile-menu-selector",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[t("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"})],-1)])),dropdown:g(()=>[t("div",ve,[n(m,{auth:e.auth},null,8,["auth"])])]),_:1})]),t("div",we,[t("div",ye,[t("div",be,[y(c(e.$t(p.generateGreetings()))+" ",1),t("span",null,c(e.$page.props.auth.user.first_name)+"!",1)]),t("div",ke,[t("span",xe,c(u.time),1)])]),t("div",$e,[n(a),n(d,{class:"rtl:ml-2 language_menu_wrapper",placement:"bottom-end"},{default:g(()=>[t("div",Ce,[n(l,{class:"w-7 h-7",name:p.selected_language.code},null,8,["name"]),n(l,{class:"w-5 h-5 drop-down-caret-icon",name:"cheveron-down"})])]),dropdown:g(()=>[t("div",Me,[(r(!0),i(C,null,M(p.languages_except_selected,w=>(r(),i("div",{key:w.code,class:"flex gap-2 cursor-pointer px-3 py-2 hover:bg-indigo-500 hover:text-white",onClick:We=>p.updateLanguage(w.code)},[n(l,{class:"w-5 h-5",name:w.code},null,8,["name"]),s[2]||(s[2]=y()),t("span",Se,c(w.name),1)],8,Le))),128))])]),_:1}),n(d,{class:"select_user",placement:"bottom-end"},{default:g(()=>[t("div",Ae,[t("div",Ne,[e.$page.props.auth.user.photo?(r(),i("img",{key:0,class:"user_photo",alt:e.$page.props.auth.user.first_name,src:e.$page.props.auth.user.photo},null,8,ze)):(r(),i("img",Be))]),n(l,{class:"w-5 h-5 drop-down-caret-icon",name:"cheveron-down"})])]),dropdown:g(()=>[t("div",Ue,[t("div",He,[s[3]||(s[3]=t("div",{class:"uppercase mb-2 font-bold"},"Account",-1)),t("div",Te,[t("div",je,[e.$page.props.auth.user.photo?(r(),i("img",{key:0,class:"user_photo w-10 h-10",alt:e.$page.props.auth.user.first_name,src:e.$page.props.auth.user.photo},null,8,qe)):(r(),i("img",De))]),t("div",Ee,[t("span",null,c(e.$page.props.auth.user.first_name+" "+e.$page.props.auth.user.last_name),1),t("small",null,c(e.$page.props.auth.user.email),1)])])]),n(_,{class:"flex px-6 py-2 items-center hover:bg-indigo-500 hover:text-white hover:fill-white",href:e.route("users.edit.profile")},{default:g(()=>[n(l,{class:"w-4 h-4 mr-2",name:"user_edit"}),y(" "+c(e.$t("Edit Profile")),1)]),_:1},8,["href"]),n(_,{class:"flex items-center px-6 py-2 hover:bg-indigo-500 hover:text-white hover:fill-white w-full",href:e.route("logout"),method:"delete",as:"button"},{default:g(()=>[n(l,{class:"w-4 h-4 mr-2",name:"logout"}),y(" "+c(e.$t("Logout")),1)]),_:1},8,["href"])])]),_:1})])])]),t("div",Ie,[n(m,{class:"hidden md:block sidebar shrink-0 md:w-60 overflow-y-auto"}),t("div",Ve,[t("div",Ye,[t("div",Ge,[t("h1",Pe,c(e.$t(o.title||"")),1),t("div",Fe,[n(_,{href:e.route("dashboard")},{default:g(()=>[n(l,{class:"w-3 h-3",name:"home"})]),_:1},8,["href"]),s[4]||(s[4]=t("span",{class:"b-item"},"/",-1)),u.edit_route?(r(),$(_,{key:0,href:e.route(u.edit_route),class:"capitalize"},{default:g(()=>[y(c(u.edit_route),1)]),_:1},8,["href"])):b("",!0),u.edit_route?(r(),i("span",Oe,"/")):b("",!0),t("span",Re,c(e.$t(o.title||"")),1)])]),t("div",Ze,[t("button",{class:"theme-toggle",id:"theme-toggle",title:"Toggles light & dark","aria-label":u.current_mode,"aria-live":"polite",onClick:s[0]||(s[0]=(...w)=>p.switchMode&&p.switchMode(...w))},s[5]||(s[5]=[O('<svg class="sun-and-moon" aria-hidden="true" width="24" height="24" viewBox="0 0 24 24"><mask class="moon" id="moon-mask"><rect x="0" y="0" width="100%" height="100%" fill="white"></rect><circle cx="24" cy="10" r="6" fill="black"></circle></mask><circle class="sun" cx="12" cy="12" r="6" mask="url(#moon-mask)" fill="currentColor"></circle><g class="sun-beams" stroke="currentColor"><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></g></svg>',1)]),8,Qe)])]),n(z),t("div",Je,[R(e.$slots,"default")])])])])])],10,me)}const st=U(pe,[["render",Ke]]);export{st as L};
